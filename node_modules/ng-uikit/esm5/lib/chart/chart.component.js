/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, Input, Output } from '@angular/core';
var ChartComponent = /** @class */ (function () {
    function ChartComponent(el) {
        this.el = el;
        this.width = '400px';
        this.height = '400px';
        this.clickChart = new EventEmitter();
        this.responsive = true;
    }
    /**
     * @return {?}
     */
    ChartComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @return {?}
     */
    ChartComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var ctx = this.el.nativeElement.children[0].children[0].getContext('2d');
        /** @type {?} */
        var _that = this;
        Chart.plugins.register({
            afterDatasetsDraw: function (chartInstance, easing) {
                // To only draw at the end of animation, check for easing === 1
                /** @type {?} */
                var ctx = chartInstance.chart.ctx;
                chartInstance.data.datasets.forEach(function (dataset, i) {
                    /** @type {?} */
                    var meta = chartInstance.getDatasetMeta(i);
                    if (!meta.hidden) {
                        meta.data.forEach(function (element, index) {
                            // Draw the text in black, with the specified font
                            ctx.fillStyle = 'rgb(0, 0, 0)';
                            /** @type {?} */
                            var fontSize = 16;
                            /** @type {?} */
                            var fontStyle = 'normal';
                            /** @type {?} */
                            var fontFamily = 'Helvetica Neue';
                            ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                            // Just naively convert to string for now
                            /** @type {?} */
                            var dataString = dataset.data[index].toString();
                            // Make sure alignment settings are correct
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'middle';
                            /** @type {?} */
                            var padding = 5;
                            /** @type {?} */
                            var position = element.tooltipPosition();
                            ctx.fillText(dataString, position.x, position.y - (fontSize / 2) - padding);
                        });
                    }
                });
            }
        });
        this.chart = new Chart(ctx, {
            // The type of chart we want to create
            type: 'bar',
            // The data for our dataset
            data: this.data,
            maintainAspectRatio: false,
            responsive: true,
            // Configuration options go here
            options: {
                onClick: function (e) {
                    /** @type {?} */
                    var activePoints = _that.chart.getElementsAtEvent(e);
                    /** @type {?} */
                    var index = activePoints[0]._index;
                    _that.clickChart.emit({ y: this.data.datasets[0].data[index], x: this.data.labels[index] });
                },
                title: {
                    display: true,
                    text: 'My Title',
                    fontSize: 16
                },
                legend: {
                    enabled: false,
                },
                scales: {
                    yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                },
                layout: {
                    padding: {
                        left: 50,
                        right: 0,
                        top: 0,
                        bottom: 0
                    }
                }
            },
            onClick: function (e) {
                /** @type {?} */
                var activePoints = _that.chart.getElementsAtEvent(e);
                /** @type {?} */
                var selectedIndex = activePoints[0]._index;
                console.log(this.data.datasets[0].data[selectedIndex]);
            }
        });
    };
    /**
     * @param {?} e
     * @return {?}
     */
    ChartComponent.prototype.onCanvasClick = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // if(this.chart) {
        //   let element = this.chart.getElementAtEvent(event);
        //   let dataset = this.chart.getDatasetAtEvent(event);
        //   if(element && element[0] && dataset) {
        //     this.clickChart.emit({originalEvent: event, element: element[0], dataset: dataset});
        //   }
        // }
    };
    ChartComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ui-chart',
                    template: "<div style=\"position:relative\" [style.width]=\"responsive && !width ? null : width\" [style.height]=\"responsive && !height ? null : height\">\n  <canvas [attr.width]=\"responsive && !width ? null : width\" [attr.height]=\"responsive && !height ? null : height\" (click)=\"onCanvasClick($event)\"></canvas>\n</div>\n",
                    styles: [""]
                },] },
    ];
    ChartComponent.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    ChartComponent.propDecorators = {
        data: [{ type: Input }],
        width: [{ type: Input }],
        height: [{ type: Input }],
        clickChart: [{ type: Output }]
    };
    return ChartComponent;
}());
export { ChartComponent };
if (false) {
    /** @type {?} */
    ChartComponent.prototype.data;
    /** @type {?} */
    ChartComponent.prototype.width;
    /** @type {?} */
    ChartComponent.prototype.height;
    /** @type {?} */
    ChartComponent.prototype.clickChart;
    /** @type {?} */
    ChartComponent.prototype.chart;
    /**
     * @type {?}
     * @private
     */
    ChartComponent.prototype.options;
    /** @type {?} */
    ChartComponent.prototype.responsive;
    /** @type {?} */
    ChartComponent.prototype.el;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhcnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctdWlraXQvIiwic291cmNlcyI6WyJsaWIvY2hhcnQvY2hhcnQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQWdCLFNBQVMsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFJeEc7SUFpQkUsd0JBQW1CLEVBQWM7UUFBZCxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBUHhCLFVBQUssR0FBRyxPQUFPLENBQUM7UUFDaEIsV0FBTSxHQUFHLE9BQU8sQ0FBQztRQUNoQixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUcxQyxlQUFVLEdBQUcsSUFBSSxDQUFDO0lBR2xCLENBQUM7Ozs7SUFFRCxpQ0FBUTs7O0lBQVI7SUFDQSxDQUFDOzs7O0lBRUQsd0NBQWU7OztJQUFmOztZQUNRLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUM7O1lBQ3BFLEtBQUssR0FBRyxJQUFJO1FBQ2xCLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1lBQ3JCLGlCQUFpQixFQUFFLFVBQVUsYUFBYSxFQUFFLE1BQU07OztvQkFFNUMsR0FBRyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRztnQkFFakMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsT0FBTyxFQUFFLENBQUM7O3dCQUNsRCxJQUFJLEdBQUcsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7b0JBQzFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7d0JBQ2pCLElBQUksQ0FBQyxJQUFJLENB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OztJQUFiLFVBQWMsQ0FBQztRQUNiLG1CQUFtQjtRQUNuQix1REFBdUQ7UUFDdkQsdURBQXVEO1FBQ3ZELDJDQUEyQztRQUMzQywyRkFBMkY7UUFDM0YsTUFBTTtRQUNOLElBQUk7SUFDTixDQUFDOztnQkFuSEYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxVQUFVO29CQUNwQixRQUFRLEVBQUUsZ1VBR1g7b0JBQ0MsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDO2lCQUNiOzs7Z0JBWGlDLFVBQVU7Ozt1QkFhekMsS0FBSzt3QkFDTCxLQUFLO3lCQUNMLEtBQUs7NkJBQ0wsTUFBTTs7SUF5R1QscUJBQUM7Q0FBQSxBQXJIRCxJQXFIQztTQTdHWSxjQUFjOzs7SUFDekIsOEJBQW1COztJQUNuQiwrQkFBeUI7O0lBQ3pCLGdDQUEwQjs7SUFDMUIsb0NBQTBDOztJQUMxQywrQkFBVzs7Ozs7SUFDWCxpQ0FBcUI7O0lBQ3JCLG9DQUFrQjs7SUFFTiw0QkFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FmdGVyVmlld0luaXQsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuZGVjbGFyZSB2YXIgQ2hhcnQ6IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndWktY2hhcnQnLFxyXG4gIHRlbXBsYXRlOiBgPGRpdiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCIgW3N0eWxlLndpZHRoXT1cInJlc3BvbnNpdmUgJiYgIXdpZHRoID8gbnVsbCA6IHdpZHRoXCIgW3N0eWxlLmhlaWdodF09XCJyZXNwb25zaXZlICYmICFoZWlnaHQgPyBudWxsIDogaGVpZ2h0XCI+XHJcbiAgPGNhbnZhcyBbYXR0ci53aWR0aF09XCJyZXNwb25zaXZlICYmICF3aWR0aCA/IG51bGwgOiB3aWR0aFwiIFthdHRyLmhlaWdodF09XCJyZXNwb25zaXZlICYmICFoZWlnaHQgPyBudWxsIDogaGVpZ2h0XCIgKGNsaWNrKT1cIm9uQ2FudmFzQ2xpY2soJGV2ZW50KVwiPjwvY2FudmFzPlxyXG48L2Rpdj5cclxuYCxcclxuICBzdHlsZXM6IFtgYF1cclxufSlcclxuZXhwb3J0IGNsYXNzIENoYXJ0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuICBASW5wdXQoKSBkYXRhOiBhbnk7XHJcbiAgQElucHV0KCkgd2lkdGggPSAnNDAwcHgnO1xyXG4gIEBJbnB1dCgpIGhlaWdodCA9ICc0MDBweCc7XHJcbiAgQE91dHB1dCgpIGNsaWNrQ2hhcnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgY2hhcnQ6IGFueTtcclxuICBwcml2YXRlIG9wdGlvbnM6IGFueTtcclxuICByZXNwb25zaXZlID0gdHJ1ZTtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIGVsOiBFbGVtZW50UmVmKSB7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIGNvbnN0IGN0eCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5jaGlsZHJlblswXS5jaGlsZHJlblswXS5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgY29uc3QgX3RoYXQgPSB0aGlzO1xyXG4gICAgQ2hhcnQucGx1Z2lucy5yZWdpc3Rlcih7XHJcbiAgICAgIGFmdGVyRGF0YXNldHNEcmF3OiBmdW5jdGlvbiAoY2hhcnRJbnN0YW5jZSwgZWFzaW5nKSB7XHJcbiAgICAgICAgLy8gVG8gb25seSBkcmF3IGF0IHRoZSBlbmQgb2YgYW5pbWF0aW9uLCBjaGVjayBmb3IgZWFzaW5nID09PSAxXHJcbiAgICAgICAgdmFyIGN0eCA9IGNoYXJ0SW5zdGFuY2UuY2hhcnQuY3R4O1xyXG5cclxuICAgICAgICBjaGFydEluc3RhbmNlLmRhdGEuZGF0YXNldHMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YXNldCwgaSkge1xyXG4gICAgICAgICAgdmFyIG1ldGEgPSBjaGFydEluc3RhbmNlLmdldERhdGFzZXRNZXRhKGkpO1xyXG4gICAgICAgICAgaWYgKCFtZXRhLmhpZGRlbikge1xyXG4gICAgICAgICAgICBtZXRhLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAvLyBEcmF3IHRoZSB0ZXh0IGluIGJsYWNrLCB3aXRoIHRoZSBzcGVjaWZpZWQgZm9udFxyXG4gICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiKDAsIDAsIDApJztcclxuXHJcbiAgICAgICAgICAgICAgdmFyIGZvbnRTaXplID0gMTY7XHJcbiAgICAgICAgICAgICAgdmFyIGZvbnRTdHlsZSA9ICdub3JtYWwnO1xyXG4gICAgICAgICAgICAgIHZhciBmb250RmFtaWx5ID0gJ0hlbHZldGljYSBOZXVlJztcclxuICAgICAgICAgICAgICBjdHguZm9udCA9IENoYXJ0LmhlbHBlcnMuZm9udFN0cmluZyhmb250U2l6ZSwgZm9udFN0eWxlLCBmb250RmFtaWx5KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gSnVzdCBuYWl2ZWx5IGNvbnZlcnQgdG8gc3RyaW5nIGZvciBub3dcclxuICAgICAgICAgICAgICB2YXIgZGF0YVN0cmluZyA9IGRhdGFzZXQuZGF0YVtpbmRleF0udG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGFsaWdubWVudCBzZXR0aW5ncyBhcmUgY29ycmVjdFxyXG4gICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBwYWRkaW5nID0gNTtcclxuICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBlbGVtZW50LnRvb2x0aXBQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgIGN0eC5maWxsVGV4dChkYXRhU3RyaW5nLCBwb3NpdGlvbi54LCBwb3NpdGlvbi55IC0gKGZvbnRTaXplIC8gMikgLSBwYWRkaW5nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5jaGFydCA9IG5ldyBDaGFydChjdHgsIHtcclxuICAgICAgLy8gVGhlIHR5cGUgb2YgY2hhcnQgd2Ugd2FudCB0byBjcmVhdGVcclxuICAgICAgdHlwZTogJ2JhcicsXHJcbiAgICAgIC8vIFRoZSBkYXRhIGZvciBvdXIgZGF0YXNldFxyXG4gICAgICBkYXRhOiB0aGlzLmRhdGEsXHJcbiAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLFxyXG4gICAgICByZXNwb25zaXZlOiB0cnVlLFxyXG4gICAgICAvLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZ28gaGVyZVxyXG5cclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIG9uQ2xpY2s6ZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICBsZXQgYWN0aXZlUG9pbnRzID0gX3RoYXQuY2hhcnQuZ2V0RWxlbWVudHNBdEV2ZW50KGUpO1xyXG4gICAgICAgICAgbGV0IGluZGV4ID0gYWN0aXZlUG9pbnRzWzBdLl9pbmRleDtcclxuICAgICAgICAgIF90aGF0LmNsaWNrQ2hhcnQuZW1pdCh7eSA6IHRoaXMuZGF0YS5kYXRhc2V0c1swXS5kYXRhW2luZGV4XSwgeCA6IHRoaXMuZGF0YS5sYWJlbHNbaW5kZXhdfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgZGlzcGxheTogdHJ1ZSxcclxuICAgICAgICAgIHRleHQ6ICdNeSBUaXRsZScsXHJcbiAgICAgICAgICBmb250U2l6ZTogMTZcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxlZ2VuZDoge1xyXG4gICAgICAgICAgZW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzY2FsZXM6IHtcclxuICAgICAgICAgIHlBeGVzOiBbe1xyXG4gICAgICAgICAgICB0aWNrczoge1xyXG4gICAgICAgICAgICAgIGJlZ2luQXRaZXJvOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1dXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYXlvdXQ6IHtcclxuICAgICAgICAgIHBhZGRpbmc6IHtcclxuICAgICAgICAgICAgbGVmdDogNTAsXHJcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgIGJvdHRvbTogMFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgb25DbGljazpmdW5jdGlvbihlKXtcclxuICAgICAgICBsZXQgYWN0aXZlUG9pbnRzID0gX3RoYXQuY2hhcnQuZ2V0RWxlbWVudHNBdEV2ZW50KGUpO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZEluZGV4ID0gYWN0aXZlUG9pbnRzWzBdLl9pbmRleDtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEuZGF0YXNldHNbMF0uZGF0YVtzZWxlY3RlZEluZGV4XSk7XHJcblxyXG5cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvbkNhbnZhc0NsaWNrKGUpIHtcclxuICAgIC8vIGlmKHRoaXMuY2hhcnQpIHtcclxuICAgIC8vICAgbGV0IGVsZW1lbnQgPSB0aGlzLmNoYXJ0LmdldEVsZW1lbnRBdEV2ZW50KGV2ZW50KTtcclxuICAgIC8vICAgbGV0IGRhdGFzZXQgPSB0aGlzLmNoYXJ0LmdldERhdGFzZXRBdEV2ZW50KGV2ZW50KTtcclxuICAgIC8vICAgaWYoZWxlbWVudCAmJiBlbGVtZW50WzBdICYmIGRhdGFzZXQpIHtcclxuICAgIC8vICAgICB0aGlzLmNsaWNrQ2hhcnQuZW1pdCh7b3JpZ2luYWxFdmVudDogZXZlbnQsIGVsZW1lbnQ6IGVsZW1lbnRbMF0sIGRhdGFzZXQ6IGRhdGFzZXR9KTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfVxyXG4gIH1cclxuXHJcbn1cclxuIl19